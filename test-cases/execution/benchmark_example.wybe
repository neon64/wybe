use benchmark

def naive_reverse(x: list(T), ?y: list(T)) {
    if {
        [ ?h | ?t] = x ::
            naive_reverse(t, ?t2)
            ?y = t2 ,, [h]
        | else ::
            ?y = []
    }
}

def build_list_of_length(n: int, x0: int, ?l: list(int)) {
    if { n = 0 ::
        ?l = []
        | else ::
        build_list_of_length(n-1, x0 + 1, ?t)
        ?l = [x0 | t]
    }
}

build_list_of_length(5000, 0, ?l)
!benchmark.cpu_time({impure} { naive_reverse(l, ?@1) }, ?l2, ?time: float)
if { time > 0.00001 && time < 1.0 ::
    !println("benchmark took a reasonable amount of time")
    | else ::
    !println("benchmark took an unexpected amount of time: ")
    !print(time)
}
